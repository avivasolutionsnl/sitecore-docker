{
    "Parameters": {
      "LocalStorage": {
        "Type": "string",
        "Description": "The root folder for packages"
      },
      "SiteName": {
        "Type": "string",
        "DefaultValue": "sitecore",
        "Description": "The name of the site to be deployed."
      }
    },
    "Modules": [
      "SitecoreInstallExtensions"
    ],
    "Variables": {
      "Site.PhysicalPath": "[joinpath(environment('SystemDrive'), 'inetpub', 'wwwroot', parameter('SiteName'))]",
      "Site.PackagesPath": "[joinpath(variable('Site.PhysicalPath'),'sitecore','admin','packages')]",
      "Site.WebsiteFolder": "[variable('Site.PhysicalPath')]"
    },
    "Tasks": {
      "CopyPackageInstaller": {
        "Type": "Copy",
        "Params": {
          "Source": [ "[joinpath(parameter('LocalStorage'),'PackageInstaller.asmx')]" ],
          "Destination": [ "[variable('Site.WebsiteFolder')]" ]
        }
      },
      "CopySPEPackage": {
        "Type": "Copy",
        "Params": {
          "Source": [ "[joinpath(parameter('LocalStorage'),'Sitecore PowerShell Extensions-5.0.zip')]" ],
          "Destination": [ "[variable('Site.PackagesPath')]" ]
        }
      },
      "CopySXAPackage": {
        "Type": "Copy",
        "Skip": "True",
        "Params": {
          "Source": [ "[joinpath(parameter('LocalStorage'),'Sitecore Experience Accelerator 1.8 rev. 181112 for 9.1.zip')]" ],
          "Destination": [ "[variable('Site.PackagesPath')]" ]
        }
      },
      "InstallSPEPackage": {
        "Type": "InstallSitecorePackage",
        "Params": {
          "HostName": "http://sitecore",
          "PackagePath": "[joinpath(variable('Site.PackagesPath'),'Sitecore PowerShell Extensions-5.0.zip')]"
        }
      },
      "InstallSXAPackage": {
        "Type": "InstallSitecorePackage",
        "Skip": "True",
        "Params": {
          "HostName": "http://sitecore",
          "PackagePath": "[joinpath(variable('Site.PackagesPath'),'Sitecore Experience Accelerator 1.8 rev. 181112 for 9.1.zip')]"
        }
      },
      "RemovePackageInstaller": {
      "Type": "Remove",
      "Params": {
        "Source": [ "[joinpath(variable('Site.WebsiteFolder'),'PackageInstaller.asmx')]" ]
      }
    }
    }
  }